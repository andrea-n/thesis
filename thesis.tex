%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% I, the copyright holder of this work, release this work into the
%% public domain. This applies worldwide. In some countries this may
%% not be legally possible; if so: I grant anyone the right to use
%% this work for any purpose, without any conditions, unless such
%% conditions are required by law.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[
  digital, %% This option enables the default options for the
           %% digital version of a document. Replace with `printed`
           %% to enable the default options for the printed version
           %% of a document.
  oneside, %% This option enables double-sided typesetting. Use at
           %% least 120 g/m² paper to prevent show-through. Replace
           %% with `oneside` to use one-sided typesetting; use only
           %% if you don’t have access to a double-sided printer,
           %% or if one-sided typesetting is a formal requirement
           %% at your faculty.
  table,   %% This option causes the coloring of tables. Replace
           %% with `notable` to restore plain LaTeX tables.
  nolof,     %% This option prints the List of Figures. Replace with
           %% `nolof` to hide the List of Figures.
  nolot,     %% This option prints the List of Tables. Replace with
           %% `nolot` to hide the List of Tables.
  %% More options are listed in the user guide at
  %% <http://mirrors.ctan.org/macros/latex/contrib/fithesis/guide/mu/fi.pdf>.
]{fithesis3}
%% The following section sets up the locales used in the thesis.
\usepackage[resetfonts]{cmap} %% We need to load the T2A font encoding
\usepackage[T1,T2A]{fontenc}  %% to use the Cyrillic fonts with Russian texts.
\usepackage[
  main=czech, %% By using `czech` or `slovak` as the main locale
                %% instead of `english`, you can typeset the thesis
                %% in either Czech or Slovak, respectively.
  english, german, russian, czech, slovak %% The additional keys allow
]{babel}        %% foreign texts to be typeset as follows:
%%
%%   \begin{otherlanguage}{german}  ... \end{otherlanguage}
%%   \begin{otherlanguage}{russian} ... \end{otherlanguage}
%%   \begin{otherlanguage}{czech}   ... \end{otherlanguage}
%%   \begin{otherlanguage}{slovak}  ... \end{otherlanguage}
%%
%% For non-Latin scripts, it may be necessary to load additional
%% fonts:
\usepackage{paratype}
\def\textrussian#1{{\usefont{T2A}{PTSerif-TLF}{m}{rm}#1}}
%%
%% The following section sets up the metadata of the thesis.
\thesissetup{
    date          = \the\year/\the\month/\the\day,
    university    = mu,
    faculty       = fi,
    type          = mgr,
    author        = Bc. Andrea Navrátilová,
    gender        = f,
    advisor       = {RNDr. Radek Ošlejšek, Ph.D.},
    title         = {Vizualizace pro dohled a analýzu bezpečnostních her},
    TeXtitle      = {Vizualizace pro dohled a~analýzu bezpečnostních her},
    keywords      = {KYPO, Capture the flag, CtF, bezpečnostní hry, vizualizace, D3.js, Angular, ...},
    TeXkeywords   = {KYPO, Capture the flag, CtF, bezpečnostní hry, vizualizace, D3.js, Angular, \ldots},
    abstract      = {This is the abstract of my thesis, which can

                     span multiple paragraphs.},
    thanks        = {These are the acknowledgements for my thesis, which can

                     span multiple paragraphs.}
}
\usepackage{makeidx}      %% The `makeidx` package contains
\makeindex                %% helper commands for index typesetting.
%% These additional packages are used within the document:
\usepackage{paralist} %% Compact list environments
\usepackage{amsmath}  %% Mathematics
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{url}      %% Hyperlinks
\usepackage{markdown} %% Lightweight markup
\usepackage{listings} %% Source code highlighting
\lstset{
  basicstyle      = \ttfamily,%
  identifierstyle = \color{black},%
  keywordstyle    = \color{blue},%
  keywordstyle    = {[2]\color{cyan}},%
  keywordstyle    = {[3]\color{olive}},%
  stringstyle     = \color{teal},%
  commentstyle    = \itshape\color{magenta}}
\usepackage{floatrow} %% Putting captions above tables
\usepackage[backend=bibtex]{biblatex}
\bibliography{bibliography} 
\floatsetup[table]{capposition=top}
\begin{document}
\chapter{Úvod}

\chapter{Kybernetický polygon}
%%Kybernetický polygon (KYPO) je projekt bezpečnostního týmu Masarykovy univerzity CSIRT-MU. Zabývá se výzkumem a vývojem unikátního prostředí pro analýzu hrozeb ohrožujících bezpečnost kritických informačních infrastruktur.\cite{kypocz}\par
%%Prostředí KYPO je virtualizační platforma postavená na cloudu umožňující simulace různých kybernetických útoků na libovolné infrastruktury. Lze vytvářet různorodé scénáře, které mohou obsahovat rozsáhlé počítačovové sítě virtuálních zařízení. Tyto dynamicky vytvářené sítě, tzv. sandboxy, mohou být libovolného rozsahu, na jejich zařízeních mohou běžet různé operační systémy a aplikace a jsou izolovány mezi sebou i od okolního světa. \cite{ctfDesign}
%% izolovány nebo izolovatelné?
%% sandboxy nejsou dynamicky vytvářené sítě
Kybernetický polygon (KYPO) je projekt bezpečnostního týmu Masarykovy univerzity CSIRT-MU. Zabývá se výzkumem a vývojem unikátního prostředí pro analýzu hrozeb ohrožujících bezpečnost kritických informačních infrastruktur \cite{kypocz}. KYPO umožňuje ve virtuálním prostředí (označovaném jako sandbox) vytvářet infrastruktury různé velikosti od samostatných uzlů s různými operačními systémy, službami a aplikacemi až po rozsáhlé počítačové sítě. Díky virtualizaci je každé takové prostředí izolováno od ostatních i od okolního světa. Na tom jsou založena mnohá praktická využití této platformy.

\section{Využití platformy}
Popsaný koncept umožňuje vytváření různých prostředí s různými nástroji i předdefinovaným obsahem, a platforma KYPO tak nachází více uplatnění. Při návrhu a vývoji se zaměřuje na tato tři hlavní využití:
\begin{itemize}
\item výzkum a vývoj v oblasti kybernetické bezpečnosti,
\item forenzní analýza a síťové simulace,
\item bezpečnostní školení a cvičení.
\end{itemize}

Prvním z nich je využití ve výzkumu, vývoji a testování nových metod nebo systémů pro detekci a potlačení kybernetických útoků, což vyžaduje pokročilou úroveň znalostí. KYPO v tomto případě poskytuje sandbox a volitelnou monitorovací infrastrukturu. Uživatel může použít svůj vlastní obraz nebo využít již dostupná virtuální zařízení a doinstalovat potřebné aplikace. \cite{kypo2017}\par
Dále je možné prostředí KYPO použít při forenzní analýze neznámých nebo již napadených strojů. Díky izolaci od okolí se škodlivý software nemůže dále rozšířit. Lze také využít připravených nástrojů pro automatickou analýzu. \cite{lessons2015, kypo2017}\par
Třetí oblastí, které se týká i tato práce, je návrh, realizace a vyhodnocování bezpečnostních her, školení a cvičení. KYPO pro tyto účely dovoluje vytvářet různé scénáře sloužící k procvičování různých dovedností. Mezi výhody patří opět možnost použití různých operačních systémů, ale také vysoká interaktivita, monitoring aktivity během výuky a možnost vzdáleného přístupu ke všem zařízením pro vyučujícího. \cite{lessons2015, kypocz}

\section{Capture the Flag}
Platforma KYPO se mimo jiné využívá k výuce v oblasti bezpečnosti a k bezpečnostním školením. Vedle čistě obranných cvičení Cyber Defence eXercises (CDX) do této oblasti patří bezpečnostní hry s názvem Capture the Flag (CtF). \cite{ctfDesign} Jedná se o metodu aktivního učení, kde studenti přímo využívají své znalosti. CtF hry jsou zaměřeny na získávání a prohlubování znalostí v oblasti penetračního testování\footnote{Penetrační testování je proces, při kterém se pomocí současných útočných technik odhalují a využívají zranitelnosti systému, které by jinak mohli použít skuteční útočníci.}. Účastníci jsou postaveni do role útočníka, což by jim také mělo pomoci při předvídání případných útoků. \cite{lessons2015, ctfDesign}\par
Základní myšlenka vychází z klasické venkovní hry s tímto názvem, kde spolu soupeří dva týmy, jejichž úkolem je zajmout nepřátelskou vlajku a zároveň ubránit svou vlastní. V bezpečnostních CtF hrách jde o využití zranitelností systému a vlajka (flag) je ve formě unikátního textového řetězce.\par
Z hlediska zaměření se na útok nebo obranu mohou mít tyto hry různé modifikace: \cite{Dankovcikova2015thesis, ctfDesign}
\begin{itemize}
  \item pouze útok – založené na ofenzivních úlohách, kde tým je v pozici útočníka na danou infrastrukturu,
  \item kombinace útoku a obrany – klasické schéma, týmy útočí na sítě protivníků a zároveň brání svou vlastní,
  \item obrana nebo útok – kde jeden tým pouze brání a druhý útočí.
\end{itemize}
Útočná varianta je snadno škálovatelná a může se jí zúčastnit libovolný počet týmů. Účastníci následují daný scénář a hra bývá rozdělena do několika částí. Ty mohou být v závislosti na zvoleném formátu procházeny postupně, nebo volně podle výběru.\par
Oproti tomu varinta s obranou i útokem je vhodná pro menší počet týmů. Každý tým dostane svou vlastní síť a čas na navrhutí obrany a útoků. Body pak získávají za nalezené vlajky i obranu své sítě.\cite{Masarik2017thesis}

\section{Capture the Flag hry v KYPO} \label{ctfGamesKYPO}
Pro výukové účely byl do KYPO implementován modul pro vytváření a běh Ctf her. Pomocí portletů v Liferay portálu mohou vyučující hry spravovat a studenti získají přístup k rozhraní, které zajistí jejich průchod skrze hru. Také byl vytvořen prototyp hry zaměřený na výuku penetračního testování.\par
Při návrhu je třeba brát v úvahu nevyváženost ve znalostech a schopnostech jednotlivých hráčů či týmů. Ta může způsobit, že pro některé účastníky bude hra příliš obtížná nebo příliš snadná. Z tohoto důvodu je vhodné hru rozdělit na menší úseky a také zpřístupnit různé nápovědy, kterých budou moci hráči využít. Aby účastníci nebyli zbytečně vyrušováni, bývá také žádoucí, aby hra proběhla s minimem zásahů do hry vyučujícími a úlohy jako vysvětlení pravidel, zadání úkolu či vyhodnocení byly v režii platformy.\cite{ctfDesign} 
\subsection{Návrh} \label{gameDesign}
Capture the Flag jsou v Kybernetickém polygonu navrženy jako útočné (attack-only) a může je hrát jak jeden samotný hráč, tak několik lidí v týmu, pro začátečníky může být hra v týmu vhodnější. Spuštěním více instancí paralelně lze hru koncipovat jako soutěž. Hry jsou rozděleny do několika po sobě jdoucích úrovní s relativně zvyšující se obtížností, zpravidla je jich menší počet (3–5). Každá tato úroveň má definovaný cíl, např. krádež dat ze vzdáleného serveru. Pro dokončení úrovně musí hráč nalézt správný flag, který je ve formě krátkého textového řetězce, typicky je to kontrolní součet nalezených dat. Za nalezení tohoto řešení hráči obdrží odpovídající počet bodů.\par
%% lze hru koncipovat jako soutěž - je to správně?
Na začátku hry se týmy seznámí s pravidly a poté vstoupí do první úrovně. Se vstupem do úrovně se zpřístupní její aktuální zadání společně s polem pro nalezené řešení. Na vyřešení úrovně má tým časový limit, který může s bodovou penalizací překročit. Tento po sekundách odpočítávaný limit má přiblížit simulaci reálným situacím, kde čas může hrát roli. Zároveň poskytuje hráčům určitý časový odhad a srovnání náročnosti s ostatními úrovněmi.\par
Pro případ, že tým již nemá dostatek času nebo má potíže s vyřešením úkolu, je v každé úrovni k dispozici určitý počet nápověd za cenu bodové penalizace. Nápovědy jsou volitelné a jejich výběr je možný na základě zobrazené informace o jejich povaze, např. jaký nástroj nebo příkaz má být zvolen či jak má být nástroj použit. Bodová penalizace se může pro různé nápovědy lišit. V případě, že ani s využitím nápověd tým nedokáže úroveň dokončit, má ještě možnost zobrazit si její řešení. To je užitečné zejména v případech, kdy hra probíhá vzdáleně a účastníci nejsou v jedné místosti s vyučujícím. Dále je týmu umožněno přeskočit úroveň a přejít do další nebo ukončit hru. Co se týká externích zdrojů nebo poznámek, jejich použití je v reálných situacích běžné, a proto může být jejich využití během hry povoleno. \cite{ctfDesign}\par
\subsection{Implementace}
%% Doplnit obrázek z portletu/ů!!!!!!
Ctf hry jsou ve webovém portálu KYPO implementovány jako nový modul a skrze jeho portlety jsou poskytnuty pohledy pro tyto uživatelské role:
\begin{itemize}
  \item vyučující, který potřebuje hry vytvářet a spravovat,
  \item student, který potřebuje hrou projít.
\end{itemize}
Vyučující používá pro správu administrátorský portlet. Ten umožňuje přidávání, modifikaci a odstraňování jak her, tak i úrovní v rámci dané hry. Také lze upravovat úvod nebo pravidla hry a u jednotlivých úrovní je možné měnit jejich zadání, časový limit, bodové hodnocení a nápovědy s jejich penalizací. Mimo něj však musí vyučující poskytnout topologii sítě a připravit zařízení ve hře včetně operačního systému, aplikací a služeb. \cite{ctfDesign, Dankovcikova2015thesis}\par
%% vytváří typologii opravdu mimo portlet? ano
Student používá pro přístup do hry odlišný portlet reprezentující herní rozhraní, který poskytuje funkcionalitu popsanou v předchozí podkapitole \ref{gameDesign}.\par
Přístupy k zařízením v průběhu hry zajišťuje VNC portlet, který je jedním ze základních modulů portálu. VNC portlet dovoluje sdílení obrazovky virtuálních zařízení skrze VNC\footnote{Virtual Network Computing (VNC) je systém umožňující vzdálené připojení ke grafickému uživatelskému rozhraní.} spojení. Pomocí něj může vyučující přistupovat k sandboxům ve hře, což je užitečné zvláště v případech, kdy vyučující a studenti nejsou společně v jedné místnosti.\cite{ctfDesign}
%% je info o VNC portletu správně?
\subsection{Prototyp}
Za účelem testování nového modulu byl vytvořen prototyp hry pro výuku základních technik penetračního testování. Prototyp zahrnuje čtyři úrovně s konečným cílem přípravy NTP DDoS amplification\footnote{NTP amplification je DDoS útok, při kterém útočník využije Network Time Protocol (NTP) server k zahlcení cíle útoku. Princip „zesílení“ spočívá v tom, že požadavky zaslané na NTP server s podvrženou zdrojovou IP adresou, která je současně IP adresou cíle, jsou menší než vrácené odpovědi.} útoku.\par
Na začátku hry vidí účastníci jen topologii sítě bez podrobnějších informací a mají přístup k jednomu zařízení. Hra poté pokračuje čtyřmi úrovněmi zaměřenými na:
\begin{itemize}
  \item průzkum síťových služeb,
  \item vyhledání neveřejných informací,
  \item využití zranitelnosti serveru,
  \item přípravu DDoS amplification útoku.
\end{itemize}
Úkolem v první úrovni je prozkoumat síťové porty a zadat správný flag, což je seznam otevřených síťových portů. Hráčům je doporučen nástroj, který by měli použít, a dále jsou k dispozici dvě volitelné nápovědy. Jedna naznačí cíl skenování a užitečné vlastnosti nástroje, druhá zobrazí potřebný příkaz.\par
V druhé úrovni je flag jako VCE\footnote{Common Vulnerabilities and Exposures (VCE) je systém, ve kterém je každé známé zranitelnosti přiřazen jednoznačný identifikátor.} identifikátor, který má být získán z obsahu databáze použitím SQL injection. I zde jsou doporučeny nástroje k použití a připraveny dvě nápovědy, jako upřesnění zranitelného skriptu serveru nebo hlavní část příkazu.\par
V třetí úrovni má být tato nalezená zranitelnost využita k získání přístupu na server, kde se v lokálním souboru nachází aktuální flag. Připraveny jsou čtyři nápovědy. První nápověda pomáhá se spuštěním konzole nástroje, další s vyhledáním návodu na využití zranitelnosti, třetí ukáže potřebný modul nástroje Metasploit a poslední specifikuje název hledaného souboru.\par
V poslední čtvrté úrovni není cílem nalézt její flag, ale konfigurací NTP služby umožnit daný útok. Kontrola, zda je server správně nakonfigurován, se provede stisknutím tlačítka a v případě pozitivního vyhodnocení je hra úspěšně dokončena. Nápovědy nasměrují hráče ke konfiguračnímu souboru a poukáží na následnou potřebu restartování služby. \cite{ctfDesign}\par
%%Úkolem v první úrovni je prozkoumat síťové porty a zadat správný flag, což je seznam otevřených síťových portů. V druhé úrovni je flag jako VCE\footnote{Common Vulnerabilities and Exposures (VCE) je systém, ve kterém je každé známé zranitelnosti přiřazen jednoznačný identifikátor.} identifikátor, který má být získán z obsahu databáze použitím SQL injection. V obou úrovních jsou doporučeny nástroje, které by měli být použity a jsou k dispozici dvě volitelné nápovědy. V třetí úrovni má být tato nalezená zranitelnost využita k získání přístupu na server, kde se v lokálním souboru nachází aktuální flag. Připraveny jsou čtyři nápovědy. V poslední čtvrté úrovni není cílem nalézt její flag, ale konfigurací NTP služby umožnit daný útok. Kontrola, zda je server správně nakonfigurován, se provede stisknutím tlačítka a v případě pozitivního vyhodnocení je hra úspěšně dokončena. Nápovědy nasměrují hráče ke konfiguračnímu souboru a poukáží na následnou potřebu restartování služby.

\subsection{Testování} \label{gameTesting}
Popsaný prototyp byl již otestován při mnoha různých příležitostech, jak národních i mezinárodních, a taktéž byla zapojena škála uchazečů lišících se věkem, znalostmi i zkušenostmi (dle zdroje \cite{ctfDesign} to bylo již v roce 2016 celkem 18 příležitostí a přibližně 260 účastníků).
Díky těmto událostem bylo získáno několik poznatků, které vedly k následným rozšířením herního modulu a úpravám prototypu hry. Jedná se o následující poznatky:
\begin{itemize}
  \item náročnost úrovní není vyvážená a některé úrovně často vyžadují více času,
  \item není vhodné poskytovat hráčům informace mimo herní platformu,
  \item pokud nejsou u jednotlivých nápověd poskytnuty informace o jejich povaze, účastníci netuší, zda jim nápověda pomůže a zda ji mají použít,
  \item bez zaznamenávání událostí nemají vyučující během hry žádný přehled o aktuálním postupu účastníků.
\end{itemize}
Náročnost jednotlivých úrovní není stejná a na některých úrovních strávilo mnoho účastníků více času, než se očekávalo. Také často měli místo problému s nalezením řešení potíže spíše s jeho realizací, jako např. nezkušenost s příkazovým řádkem nebo opomenutí restartu služby po změně konfigurace.\par
%% Také často nemívali problém s nalezením řešení, ale měli potíže s jeho realizací, jako např. nezkušenost s příkazovým řádkem nebo opomenutí restartu služby po změně konfigurace.
Informace poskytované mimo herní platformu bývají rušivé a nevyhovují ani hráčům, ani vyučujícím. To bylo vypozorováno při několika příležitostech, kdy vyučující hráčům představovali doporučené řešení pro každou úroveň. Nejedná se však jen o skutečnost, že doplňující informace ze strany vyučujících mohou studentům hru přerušit a změnit střed jejich pozornosti, ale také o fakt, že hráči nepostupují stejně rychle a potřebují tyto informace v rozdílnou dobu. Zejména, pokud se hra koná na dálku a účastníci, kteří v tomto případě dostávají instrukce prostřednictvím e-mailu, by mohli správné řešení obržet příliš brzy, nebo by o něj museli žádat. Je tedy výhodné, když tuto možnost poskytne přímo herní platforma a hráči si mohou sami zobrazit řešení v rozhraní hry. Možnost zobrazení správného řešení bylo jedním z přidaných vylepšení oproti původní verzi.\par
Nápovědy byly v rámci původního řešení herního modulu hráčům nabízeny postupně v lineárním pořadí, od základních po ty, co poskytují informací více. Navíc nebyl k dispozici žádný popis, čeho se daná nápověda týká. V takovém případě si hráči nejsou jistí, zda jim nápověda pomůže. Nastávaly situace, kdy si vzali nápovědu s informací, kterou již znali, nebo si nápovědu raději nevzali. Jelikož jsou za nápovědy bodové penalizace, někteří tak ztratili body zbytečně a jiní si nápovědu nevzali, protože již v úrovni pokročili dále a museli by ztratit body i za nápovědy, které nepotřebovali. Pro vylepšení systému nápověd bylo implementováno další rozšíření.\par
Vyučující nemají v administrátorském portletu přehled o postupu jednotlivých týmů a nemohou tak například pomoci těm, kteří potřebují jejich asistenci. Znalosti jednotlivých hráčů či týmů se často liší a někteří z nich jsou začátečníci s nedostatečnými předchozími znalostmi. Aby mohli takové hráče včas rozpoznat, bylo nutné se účastníků zeptat nebo sledovat jejich konzole přímo na místě nebo přes KYPO portál. Další vylepšení v podobě zaznamenávání interakcí s herním modulem umožnilo alespoň omezené sledování jednotlivých kroků hráčů. \cite{ctfDesign}
\subsection{Rozšíření} \label{gameExtensions}
Na základě poznatků popsaných v předchozí podkapitole \ref{gameTesting} byla do herního modulu přidána následující vylepšení:
\begin{itemize}
  \item zdokonalený systém nápověd,
  \item možnost zobrazení správného řešení,
  \item zaznamenávání jednotlivých akcí účastníků.
\end{itemize}
Nápovědy jsou nyní koncipovány tak, aby se hráč mohl rozhodnout zda a jakou nápovědu použít. Zaprvé je ke každé nápovědě přidána informace, čeho se daná nápověda týká, například „který nástroj zvolit“, „jak použít daný nástroj“ nebo „jaký použít příkaz“. Dále není nutné využít nápovědy postupně, ale hráč si může zvolit, kterou nápovědu si na základě popisu zobrazí. Pokud ani přes použití nápověd nedokáže pokračovat, může využít dalšího rozšíření a zobrazit si doporučené řešení přímo v prostředí hry. \cite{ctfDesign}\par
Také jsou nyní sledovány akce hráčů během hry, následující události jsou společně s jejich časovými razítky zaznamenávány do CSV souboru:
\begin{itemize}
  \item začátek a dokončení hry,
  \item začátek a dokončení úrovně,
  \item zadání správného řešení,
  \item zadání nesprávného řešení a jeho obsah,
  \item použití nápovědy,
  \item přeskočení úrovně,
  \item zobrazení řešení úrovně,
  \item ukončení hry.
\end{itemize}
Tyto události zachycují pouze interakce mezi hráčem a modulem hry. Samotné poskytují jen omezené informace o krocích jednotlivých hráčů \cite{ctfDesign}, mohou však být dále zpracovávány v různých statistikách či vizualizacích.
Kromě popsaných rozšíření byl také upraven původní prototyp a ten nyní zahrnuje 6 úrovní s cílem krádeže informací. Hráč opět začíná s přístupem jen k jednomu zařízení v síti, ale sandbox nové hry obsahuje více cílových zařízení než původní.

Jako doplněk k zaznamenaným datům byly navíc přidány dotazníky, a to před začátkem hry, po skončení každé úrovně a na konci celé hry. Před začátkem hry byly zjišťovány údaje týkající se daného účastníka, jako jeho věk, vzdělání a zkušenosti relevantní pro hru. Dotazník na konci každé úrovně zjišťuje odhadovanou složitost úrovně a názor na časový limit a užitečnost nápověd. Poslední dotazník na konci hry úrovně se ptá na odhadovanou složitost a délku celé hry a také na pocity z ní.
na základě dat zaznamenaných ze hry a získaných z dotazníků se zatím podařilo dojít k těmto závěrům \cite{ctfDesign}:
\begin{itemize}
  \item Hráči využívají zdokonalený systém nápověd a možnost zobrazení řešení.
  \item Nepodařilo se zjistit, zda nápovědy účastníkům pomáhají, protože odpovědi z dotazníků neodpovídaly záznamům ze hry. Někteří v dotazníku uvedli, že jim nápověda pomohla, přestože žádnou nevyužili, nebo naopak uvedli, že nápovědu nepotřebovali, i když ji ve skutečnosti použili.
  \item Mnozí hráči, kteří využili zobrazení řešení, dokázali úroveň dokončit, jejich počet je ale menší, než se předpokládalo.
  \item Úrovně 4 a 6 byly hodnoceny jako nejtěžší, čemuž odpovídal i průměrný čas na jejich dokončení, který byl u obou znatelně větší než předpokládaný.
\end{itemize}

\chapter{Návrh vizualizace}
Vizualizace, která je výsledkem praktické části této práce, pracuje s daty získávanými v průběhu CtF her v prostředí KYPO, popsaných v předchozí kapitole \ref{ctfGamesKYPO}.\par
%%Vizualizace, která je výsledkem praktické části této práce, pracuje s daty získávanými v průběhu CtF her, které se odehrávají v prostředí KYPO a jsou popsány v předchozí kapitole \ref{ctfGamesKYPO}.
Díky implementovanému zaznamenávání událostí jsou k dispozici data, která mohou být dále využita pro analýzu těchto her nebo přehled o jejich průběhu. Analýza dat pomůže při odhalování nedostatků a při budoucím návrhu a zlepšování her tak, aby byly pro účastníky co nejvíce zajímavé. Lze například sledovat, zda skutečný čas potřebný pro zvládnutí úrovně odpovídá stanovenému limitu, jak hráči využívají nápověd a zda jsou pro ně nápovědy užitečné. Pokud bude data možné získávat v reálném čase, mohou také poskytovat vyučujícím během hry přehled o tom, jak jednotlivé týmy postupují, v jaké úrovni se nacházejí a které týmy by mohly potřebovat jejich pomoc.\par
Tato vizualizace je určena právě vyučujícím a její cíle jsou:
%%Zpomenout autora návrhu!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
\begin{itemize}
  \item celkový přehled o všech účastnících, v jaké úrovni se právě nacházejí,
  \item možnost okamžitě identifikovat týmy, které mají potíže s řešením,
  \item odhalení obecně problematických úloh, které by mohly vyžadovat společné řešení.
\end{itemize}

\section{Požadavky na vizualizaci}
\begin{figure}
  \begin{center}
    \includegraphics[width=12.7cm]{images/navrh-vizualizace-1-3.png}
  \end{center}
  \caption{Průběh hry}
  \label{fig:progress1}
\end{figure}
\section{Požadavky na vizualizaci}
\begin{figure}
  \begin{center}
    \includegraphics[width=12.7cm]{images/navrh-vizualizace-2-3.png}
  \end{center}
  \caption{Průběh hry}
  \label{fig:progress1}
\end{figure}

\section{Požadavky na technologie a integraci}
Z hlediska použitých technologií a integrace do projektu KYPO byly specifikovány následující požadavky:
\begin{itemize}
  \item bude se jednat o webovou aplikaci,
  \item vizualizace bude ve formě Liferay portletu,
  \item základ aplikace bude v podobě samostatného Angular 2 modulu,
  \item k vizualizaci dat bude využita knihovna D3.js,
  \item aplikace bude schopná načítat data z CSV souboru,
  \item dále bude schopná získávat data skrze REST API, až bude připraveno, a také tato data zobrazovat v reálném čase.
\end{itemize}
KYPO využívá vlastní webový portál postavený na platformě Liferay a je tedy samozřejmým požadavkem, aby byla vizualizace součástí tohoto portálu jako samostatný portlet. Aplikace vizualizace má být postavena na Angular2, protože byl vybrán jako jednotný framework pro vývoj dalších portletů do KYPO portálu a také byla připravena kostra portletu využívající tento framework jako základ pro nové projekty. Samotná vizualizace pak má být vykreslována pomocí knihovny D3.js určenou právě pro vizualizaci dat.\par
Jako zdroj dat mají sloužit CSV soubory, popsané v podkapitole o rozšířeních CtF her \ref{gameExtensions}. Později, až bude k dispozici API poskytující podobné záznamy událostí ze hry, má být aplikace schopná získávat data i skrze toto rozhraní a vizualizovat data v reálném čase.
%%je to v reálném čase, když se jen každou sekundu překresluje?


\chapter{Použité technologie}
\section{D3.js}
\section{Bootstrap}
\section{Angular}
\section{Liferay}

\chapter{Implementace}
výběr grafu a jeho datová struktura

%% dát načítání na začátek nebo později?
\section{Načítání dat z CSV souboru}
\subsection{Struktura dat}
\subsection{Zpracování dat}
\subsection{Služba LoadCsvDataService}

\section{Načítání dat přes/skrze/pomocí REST API}
\subsection{Popis API}
\subsection{Struktura dat}
\subsection{Zpracování dat}
\subsection{Služba LoadDataService}

\section{Součásti vizualizace}
\subsection{Vizualizace časového plánu}
odhad, timeline
\subsection{Vizualizace herních úrovní}
\subsection{Události}
\subsection{Sloupce s údaji}

\section{Ovládací prvky}
\subsection{Pohledy}
\subsection{Řazení}
\subsection{Filtrování}
\subsection{Zoom}

\section{Konfigurace}

\section{Testy}

\chapter{Závěr}

\printbibliography

\end{document}
